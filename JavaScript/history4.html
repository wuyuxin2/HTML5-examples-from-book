<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>保存复杂的状态stateObj</title>
</head>
<body>
    <table>
        <tr>
            <td>Name:</td>
            <td id="name"></td>
        </tr>
        <tr>
            <td>Color:</td>
            <td id="color"></td>
        </tr>
        <tr>
            <td>Size:</td>
            <td id="size"></td>
        </tr>
        <tr>
            <td>State:</td>
            <td id="state"></td>
        </tr>
        <tr>
            <td>Event:</td>
            <td id="event"></td>
        </tr>
    </table>

    <button>banana</button>
    <button>apple</button>

    <script>
        if(window.history.state){
            displayState(window.history.state);
            document.getElementById("state").innerHTML = "Yes";
        }else{
            document.getElementById("name").innerHTML = "No selection";
        }

        window.onpopstate = function(e){
            displayState(window.history.state);
            document.getElementById("event").innerHTML = "Yes";
        }

        var buttons = document.getElementsByTagName("button");
        for(var i= 0; i < buttons.length; i++){
            buttons[i].onclick = function(e){
                var stateObj;
                if(e.target.innerHTML == "banana"){
                    stateObj = {
                        name: "banana",
                        color: "yellow",
                        size: "large"
                    }
                }else if(e.target.innerHTML == "apple"){
                    stateObj = {
                        name: "apple",
                        color: "red",
                        size: "medium"
                    }
                }
                window.history.pushState(stateObj, "");
                displayState(stateObj);
            }
        }

        function displayState(stateObj){
            document.getElementById("name").innerHTML = stateObj.name;
            document.getElementById("color").innerHTML = stateObj.color;
            document.getElementById("size").innerHTML = stateObj.size;
        }
    </script>
    
</body>
</html>